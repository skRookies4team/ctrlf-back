# 📘 **영상 생성 재시도 API**

## ✔ url

**POST /video/job/{jobId}/retry**

---

## ✔ 설명

이전 영상 생성 Job이 `FAILED` 상태일 때

같은 scriptId/eduId 기반으로 **영상 생성 작업을 재시도**한다.

- job status MUST be `FAILED`
- retryCount 증가
- 새로운 job 엔트리 생성 여부는 선택
  → 여기서는 **기존 jobId 그대로 재사용**하는 방식으로 설계
- 백엔드가 AI 서버에 재생성 요청을 다시 보내는 구조

---

## ✔ 권한

`ROLE_ADMIN`

---

# 📌 **Request**

Body 없음.

---

# 📌 **Response**

| key        | 설명             | 타입         | 예시        |
| ---------- | ---------------- | ------------ | ----------- |
| jobId      | 재시작된 job ID  | string(uuid) | `"a913..."` |
| status     | 재시도 후 상태   | string       | `"QUEUED"`  |
| retryCount | 누적 재시도 횟수 | number       | `2`         |

### Example Response

```json
{
  "jobId": "uuid",
  "status": "QUEUED",
  "retryCount": 2
}
```

---

# 📌 **Status Codes**

| status                        | 의미                                       |
| ----------------------------- | ------------------------------------------ |
| **200 OK**                    | 재시도 성공                                |
| **400 Bad Request**           | job 상태가 FAILED가 아님                   |
| **401 Unauthorized**          | 인증 실패                                  |
| **403 Forbidden**             | ROLE_ADMIN 아님                            |
| **404 Not Found**             | jobId 없음                                 |
| **409 Conflict**              | 이미 실행 중(PROCESSING)인 job 재시도 불가 |
| **500 Internal Server Error** | AI 서버 재요청 실패                        |

---
